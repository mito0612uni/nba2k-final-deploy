{% extends "layout.html" %}
{% block content %}
<div class="container mt-4">
    <h2>ğŸ“¢ ãŠçŸ¥ã‚‰ã›ç®¡ç†</h2>
    
    <div class="card mb-4" style="background:white; padding:20px; border-radius:8px;">
        <h4>æ–°è¦ãŠçŸ¥ã‚‰ã›æŠ•ç¨¿</h4>
        <form method="post" enctype="multipart/form-data">
            <input type="hidden" name="action" value="add_news">
            
            <div class="form-group">
                <label>ã‚¿ã‚¤ãƒˆãƒ«</label>
                <input type="text" name="news_title" class="form-control" required>
            </div>
            
            <div class="form-group">
                <label>å†…å®¹</label>
                <textarea name="news_content" class="form-control" rows="4" required></textarea>
            </div>
            
            <div class="form-group">
                <label>ç”»åƒæ·»ä»˜ (ä»»æ„)</label>
                <input type="file" name="news_image" class="form-control-file">
                <small class="text-muted">å¯¾å¿œå½¢å¼: jpg, png, gif</small>
            </div>
            
            <button type="submit" class="button primary">æŠ•ç¨¿ã™ã‚‹</button>
        </form>
    </div>

    <h3>æŠ•ç¨¿æ¸ˆã¿ã®ãŠçŸ¥ã‚‰ã›</h3>
    {% if news_items %}
        <div class="list-group">
        {% for item in news_items %}
            <div class="list-group-item" style="border:1px solid #ddd; margin-bottom:10px; padding:15px; border-radius:5px; background:white;">
                <div style="display:flex; justify-content:space-between; align-items:start;">
                    <div style="flex-grow:1;">
                        <h5 style="margin-top:0; color:#004a99;">{{ item.title }}</h5>
                        <small class="text-muted">{{ item.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
                        <p style="white-space: pre-wrap; margin-top:10px;">{{ item.content }}</p>
                        
                        {% if item.image_url %}
                            <div style="margin-top:10px;">
                                <img src="{{ item.image_url }}" alt="æ·»ä»˜ç”»åƒ" style="max-width: 200px; max-height: 200px; object-fit: contain; border:1px solid #ccc;">
                            </div>
                        {% endif %}
                    </div>
                    
                    <div style="margin-left:20px;">
                        <form method="post" onsubmit="return confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
                            <input type="hidden" name="action" value="delete_news">
                            <input type="hidden" name="news_id" value="{{ item.id }}">
                            <button type="submit" class="button danger small">å‰Šé™¤</button>
                        </form>
                    </div>
                </div>
            </div>
        {% endfor %}
        </div>
    {% else %}
        <p>ã¾ã ãŠçŸ¥ã‚‰ã›ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
    {% endif %}
    
    <div style="margin-top:20px;">
        <a href="{{ url_for('roster') }}" class="button secondary">ãƒ­ã‚¹ã‚¿ãƒ¼ç®¡ç†ã¸</a>
    </div>
</div>
{% endblock %}