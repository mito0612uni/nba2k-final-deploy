{% extends "layout.html" %}
{% block content %}
<style>
    /* --- ç®¡ç†ç”»é¢å…±é€šã‚¹ã‚¿ã‚¤ãƒ« --- */
    body { background-color: #f4f6f9; }
    .admin-container { max-width: 800px; margin: 40px auto; padding: 0 15px; }
    
    .page-header {
        display: flex; align-items: center; justify-content: space-between;
        margin-bottom: 30px; border-bottom: 2px solid #e9ecef; padding-bottom: 15px;
    }
    .page-header h2 { margin: 0; color: #2c3e50; font-weight: 700; font-size: 1.8rem; }

    /* ã‚«ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ« */
    .admin-card {
        background: #ffffff; border-radius: 12px; border: none;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05); margin-bottom: 25px; overflow: hidden;
    }
    .card-header {
        background: #fff; border-bottom: 1px solid #f0f0f0; padding: 20px 25px;
        font-weight: 700; color: #34495e; font-size: 1.1rem;
    }
    .card-body { padding: 25px; }

    /* ãƒ•ã‚©ãƒ¼ãƒ è¦ç´  */
    .form-group { margin-bottom: 15px; }
    .form-group label { font-weight: 600; color: #555; margin-bottom: 8px; display: block; }
    .form-control {
        border-radius: 8px; border: 1px solid #ddd; padding: 12px; font-size: 1rem; width: 100%;
        background-color: #fdfdfd; transition: border-color 0.2s;
    }
    .form-control:focus { border-color: #007bff; box-shadow: 0 0 0 3px rgba(0,123,255,0.1); }
    
    .btn-action {
        padding: 10px 20px; border-radius: 6px; font-weight: 600; border: none; cursor: pointer; color: white;
        transition: transform 0.2s;
    }
    .btn-action:hover { transform: translateY(-2px); }
    
    .btn-switch { background-color: #007bff; }
    .btn-create { background: linear-gradient(135deg, #28a745 0%, #218838 100%); width: 100%; padding: 12px; font-size: 1.1rem; }
    .btn-rename { background-color: #6c757d; font-size: 0.9rem; padding: 8px 15px; white-space: nowrap; }

    /* ã‚·ãƒ¼ã‚ºãƒ³ãƒªã‚¹ãƒˆ */
    .season-list { list-style: none; padding: 0; margin: 0; }
    .season-item {
        display: flex; align-items: center; justify-content: space-between;
        padding: 15px 0; border-bottom: 1px solid #eee;
    }
    .season-item:last-child { border-bottom: none; }
    
    .season-info { flex-grow: 1; margin-right: 15px; }
    .current-badge {
        background-color: #e3f2fd; color: #007bff; padding: 2px 8px; 
        border-radius: 4px; font-size: 0.8rem; margin-left: 10px; font-weight: bold;
    }
    
    .rename-form { display: flex; gap: 10px; width: 100%; }
</style>

<div class="admin-container">
    <div class="page-header">
        <h2><span style="margin-right:10px;">ğŸ—“ï¸</span>ã‚·ãƒ¼ã‚ºãƒ³ç®¡ç†</h2>
    </div>
    
    <div class="admin-card">
        <div class="card-header">ã‚·ãƒ¼ã‚ºãƒ³åˆ‡ã‚Šæ›¿ãˆ</div>
        <div class="card-body">
            <div style="margin-bottom: 20px; font-size: 1.1rem;">
                ç¾åœ¨ã®ã‚·ãƒ¼ã‚ºãƒ³: <strong style="color:#007bff; font-size: 1.3rem;">{{ current_season.name }}</strong>
            </div>
            
            <form method="post" style="display:flex; gap:10px; align-items: flex-end;">
                <input type="hidden" name="action" value="switch">
                <div style="flex-grow:1;">
                    <label>è¡¨ç¤ºã™ã‚‹ã‚·ãƒ¼ã‚ºãƒ³ã‚’é¸æŠ</label>
                    <select name="season_id" class="form-control">
                        {% for s in seasons %}
                        <option value="{{ s.id }}" {% if s.is_current %}selected{% endif %}>{{ s.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <button type="submit" class="btn-action btn-switch">åˆ‡ã‚Šæ›¿ãˆ</button>
            </form>
        </div>
    </div>

    <div class="admin-card">
        <div class="card-header">æ–°ã‚·ãƒ¼ã‚ºãƒ³é–‹å§‹</div>
        <div class="card-body">
            <p class="text-muted" style="margin-bottom: 15px;">
                <small>â€» æ–°ã—ã„ã‚·ãƒ¼ã‚ºãƒ³ã‚’ä½œæˆã™ã‚‹ã¨ã€ãã‚ŒãŒã€Œç¾åœ¨ã®ã‚·ãƒ¼ã‚ºãƒ³ã€ã«ãªã‚Šã€å„ç¨®æˆç¸¾ã¯ãƒªã‚»ãƒƒãƒˆã•ã‚ŒãŸçŠ¶æ…‹ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¾ã™ï¼ˆéå»ãƒ‡ãƒ¼ã‚¿ã¯ä¿å­˜ã•ã‚Œã¾ã™ï¼‰ã€‚</small>
            </p>
            
            <form method="post" onsubmit="return confirm('æ–°ã‚·ãƒ¼ã‚ºãƒ³ã‚’é–‹å§‹ã—ã¾ã™ã‹ï¼Ÿ\nç¾åœ¨ã®ã‚·ãƒ¼ã‚ºãƒ³ã¯ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã•ã‚Œã¾ã™ã€‚');">
                <input type="hidden" name="action" value="create">
                <div class="form-group">
                    <label>æ–°ã‚·ãƒ¼ã‚ºãƒ³å</label>
                    <input type="text" name="season_name" class="form-control" placeholder="ä¾‹: 2026 Season 1" required>
                </div>
                <button type="submit" class="btn-action btn-create">æ–°ã‚·ãƒ¼ã‚ºãƒ³ã‚’ä½œæˆã—ã¦é–‹å§‹</button>
            </form>
        </div>
    </div>

    <div class="admin-card">
        <div class="card-header">ã‚·ãƒ¼ã‚ºãƒ³åç·¨é›†</div>
        <div class="card-body">
            <ul class="season-list">
                {% for s in seasons %}
                <li class="season-item">
                    <form method="post" class="rename-form">
                        <input type="hidden" name="action" value="rename">
                        <input type="hidden" name="season_id" value="{{ s.id }}">
                        
                        <div style="flex-grow:1;">
                            <input type="text" name="new_name" value="{{ s.name }}" class="form-control" style="padding: 8px;">
                        </div>
                        
                        <button type="submit" class="btn-action btn-rename" title="åå‰ã‚’å¤‰æ›´">å¤‰æ›´</button>
                    </form>
                    {% if s.is_current %}
                        <span class="current-badge">CURRENT</span>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}